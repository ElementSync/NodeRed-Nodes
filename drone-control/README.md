# node-red-drone-control
node-red node for controlling drone-control API (at http://droneapi.ddns.net:1235). Note: This node-red-node and the drone-control API are experimental.

## Installation
npm -g install node-red-drone-control

## Features
- control drone via api

## Examples
- View status of all drones
- Create new drone
- Disconnect all drones
- Create, fly and disconnect
- Fly in a pattern
- View drones on a map
- Error testing

```
[{"id":"3e4b8861.e02d08","type":"drone-control-get-inventory","z":"5c1ca253.f17e3c","name":"","x":311,"y":131,"wires":[["2720656a.c745ca","c389d125.bdc6b"]]},{"id":"271f3f1a.4223b","type":"inject","z":"5c1ca253.f17e3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":166,"y":131,"wires":[["3e4b8861.e02d08"]]},{"id":"2720656a.c745ca","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":492,"y":94,"wires":[]},{"id":"c389d125.bdc6b","type":"drone-control-get-status","z":"5c1ca253.f17e3c","name":"","droneId":"","attribute":"all","x":531,"y":130,"wires":[["746479ea.a03ba8"]]},{"id":"746479ea.a03ba8","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":736,"y":130,"wires":[]},{"id":"7f0897ba.f43848","type":"drone-control-create-simulated","z":"5c1ca253.f17e3c","name":"","droneName":"","x":299,"y":281,"wires":[["50c04646.6c64b8","66999dc2.38a8d4"],["f4ab0999.bd8988"]]},{"id":"16481249.60428e","type":"inject","z":"5c1ca253.f17e3c","name":"","topic":"","payload":"{\"droneName\":\"nodetest\"}","payloadType":"json","repeat":"","crontab":"","once":false,"x":148,"y":281,"wires":[["7f0897ba.f43848"]]},{"id":"a75f736b.d72a4","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":918,"y":275,"wires":[]},{"id":"f4ab0999.bd8988","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":496,"y":313,"wires":[]},{"id":"2255388.472e2c8","type":"drone-control-get-status","z":"5c1ca253.f17e3c","name":"","droneId":"","attribute":"all","x":714,"y":275,"wires":[["a75f736b.d72a4"]]},{"id":"50c04646.6c64b8","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":496,"y":239,"wires":[]},{"id":"66999dc2.38a8d4","type":"delay","z":"5c1ca253.f17e3c","name":"","pauseType":"delay","timeout":"120","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":495,"y":275,"wires":[["2255388.472e2c8"]]},{"id":"5a8df7fe.2863d8","type":"drone-control-get-inventory","z":"5c1ca253.f17e3c","name":"","x":311,"y":432,"wires":[["ecb5436b.79f2a"]]},{"id":"71fb99fa.4c64a8","type":"inject","z":"5c1ca253.f17e3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":166,"y":432,"wires":[["5a8df7fe.2863d8"]]},{"id":"33552577.676e9a","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":699,"y":408,"wires":[]},{"id":"f47f3a50.68b148","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":699,"y":457,"wires":[]},{"id":"ecb5436b.79f2a","type":"drone-control-disconnect-drone","z":"5c1ca253.f17e3c","name":"","droneId":"","x":497,"y":434,"wires":[["33552577.676e9a"],["f47f3a50.68b148"]]},{"id":"6af911aa.87297","type":"drone-control-create-simulated","z":"5c1ca253.f17e3c","name":"","droneName":"","x":304,"y":650,"wires":[["26791430.6260ac","29622208.1527ce"],["29622208.1527ce"]]},{"id":"6e189620.dd3658","type":"inject","z":"5c1ca253.f17e3c","name":"","topic":"","payload":"{\"droneName\":\"nodetest\"}","payloadType":"json","repeat":"","crontab":"","once":false,"x":153,"y":650,"wires":[["6af911aa.87297"]]},{"id":"26791430.6260ac","type":"delay","z":"5c1ca253.f17e3c","name":"","pauseType":"delay","timeout":"120","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":500,"y":644,"wires":[["18fa8367.b64dad"]]},{"id":"c9d82f31.44a1d","type":"drone-control-send-action","z":"5c1ca253.f17e3c","name":"","droneId":"","action":"Takeoff","x":444,"y":719.5,"wires":[["7751a290.3a109c"],["c859e619.ec7268","7751a290.3a109c"],["7751a290.3a109c"]]},{"id":"18fa8367.b64dad","type":"change","z":"5c1ca253.f17e3c","name":"","rules":[{"t":"set","p":"payload.height","pt":"msg","to":"15","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":224,"y":717,"wires":[["c9d82f31.44a1d"]]},{"id":"64f6c678.14d528","type":"drone-control-send-action","z":"5c1ca253.f17e3c","name":"","droneId":"","action":"Goto-Relative-Current","x":491,"y":794,"wires":[["2763fd53.9a9172"],["2763fd53.9a9172","eb9aaba5.ea2228"],["2763fd53.9a9172"]]},{"id":"c859e619.ec7268","type":"change","z":"5c1ca253.f17e3c","name":"","rules":[{"t":"set","p":"payload.east","pt":"msg","to":"100","tot":"num"},{"t":"set","p":"payload.north","pt":"msg","to":"50","tot":"num"},{"t":"set","p":"payload.up","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":253,"y":794,"wires":[["64f6c678.14d528"]]},{"id":"2763fd53.9a9172","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":742,"y":757,"wires":[]},{"id":"29622208.1527ce","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":503,"y":597,"wires":[]},{"id":"7751a290.3a109c","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":646,"y":694,"wires":[]},{"id":"f19238af.71ccd8","type":"drone-control-get-inventory","z":"5c1ca253.f17e3c","name":"","x":354.50001525878906,"y":1077.5000171661377,"wires":[["65663b7d.8a2c74","d6187a45.ed4178"]]},{"id":"632269ab.74d378","type":"inject","z":"5c1ca253.f17e3c","name":"Fly","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":199.50001525878906,"y":1077.5000171661377,"wires":[["f19238af.71ccd8"]]},{"id":"621bf14b.1f0c","type":"drone-control-send-action","z":"5c1ca253.f17e3c","name":"","droneId":"","action":"Takeoff","x":679.5000152587891,"y":1161.5000171661377,"wires":[["4126df9f.ce27b"],["46bc3244.d3bc9c","3a4295dc.11299a"],["2d99801c.84968"]]},{"id":"e988a475.4c50c8","type":"change","z":"5c1ca253.f17e3c","name":"","rules":[{"t":"set","p":"payload.height","pt":"msg","to":"15","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":405.50001525878906,"y":1160.0000171661377,"wires":[["621bf14b.1f0c"]]},{"id":"2d99801c.84968","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":919.5000152587891,"y":1208.0000171661377,"wires":[]},{"id":"5185b46d.4ac95c","type":"drone-control-send-action","z":"5c1ca253.f17e3c","name":"","droneId":"","action":"Return-to-Launch","x":765.5000152587891,"y":1443.5000171661377,"wires":[["7b87be9.e31984"],["7b87be9.e31984"],["7b87be9.e31984"]]},{"id":"7b87be9.e31984","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":869.5000152587891,"y":1508.5000171661377,"wires":[]},{"id":"8ba5b7c7.6612a8","type":"drone-control-send-action","z":"5c1ca253.f17e3c","name":"","droneId":"","action":"Goto-Relative-Current","x":464.50001525878906,"y":1238.5000171661377,"wires":[["4348f3b0.7bc8ac"],["4348f3b0.7bc8ac","f3177b6e.c8f3b8"],["4348f3b0.7bc8ac"]]},{"id":"3a4295dc.11299a","type":"change","z":"5c1ca253.f17e3c","name":"","rules":[{"t":"set","p":"payload.east","pt":"msg","to":"100","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":203.50001525878906,"y":1237.5000171661377,"wires":[["8ba5b7c7.6612a8"]]},{"id":"4348f3b0.7bc8ac","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":706.5000152587891,"y":1234.5000171661377,"wires":[]},{"id":"46bc3244.d3bc9c","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":919.5000152587891,"y":1168.5000171661377,"wires":[]},{"id":"4126df9f.ce27b","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":921.5000152587891,"y":1129.5000171661377,"wires":[]},{"id":"65663b7d.8a2c74","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":581.5000152587891,"y":1064.5000171661377,"wires":[]},{"id":"cb657548.804938","type":"drone-control-get-inventory","z":"5c1ca253.f17e3c","name":"","x":515.5000152587891,"y":1447.5000171661377,"wires":[["5185b46d.4ac95c"]]},{"id":"ababe919.c341c8","type":"inject","z":"5c1ca253.f17e3c","name":"Retunr-to-launch","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":390.50001525878906,"y":1447.5000171661377,"wires":[["cb657548.804938"]]},{"id":"d6187a45.ed4178","type":"delay","z":"5c1ca253.f17e3c","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":169.50001525878906,"y":1157.5000171661377,"wires":[["e988a475.4c50c8"]]},{"id":"b73a61ec.e641","type":"drone-control-send-action","z":"5c1ca253.f17e3c","name":"","droneId":"","action":"Goto-Relative-Current","x":467.50001525878906,"y":1304.5000171661377,"wires":[["af12024.a773e"],["af12024.a773e","e9736c39.4e949"],["af12024.a773e"]]},{"id":"f3177b6e.c8f3b8","type":"change","z":"5c1ca253.f17e3c","name":"","rules":[{"t":"set","p":"payload.north","pt":"msg","to":"100","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":206.50001525878906,"y":1303.5000171661377,"wires":[["b73a61ec.e641"]]},{"id":"af12024.a773e","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":709.5000152587891,"y":1300.5000171661377,"wires":[]},{"id":"543cca7e.315e14","type":"drone-control-send-action","z":"5c1ca253.f17e3c","name":"","droneId":"","action":"Goto-Relative-Current","x":473.50001525878906,"y":1367.5000171661377,"wires":[["a0ba0919.4ba508"],["a0ba0919.4ba508","5185b46d.4ac95c"],["a0ba0919.4ba508"]]},{"id":"e9736c39.4e949","type":"change","z":"5c1ca253.f17e3c","name":"","rules":[{"t":"set","p":"payload.east","pt":"msg","to":"-100","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":212.50001525878906,"y":1366.5000171661377,"wires":[["543cca7e.315e14"]]},{"id":"a0ba0919.4ba508","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":715.5000152587891,"y":1363.5000171661377,"wires":[]},{"id":"80b80b41.f90ca8","type":"worldmap","z":"5c1ca253.f17e3c","name":"","lat":"","lon":"","zoom":"","layer":"","cluster":"","maxage":"","usermenu":"show","panit":"false","x":969.0000152587891,"y":1685.2500267028809,"wires":[]},{"id":"d50bffb9.16587","type":"drone-control-get-inventory","z":"5c1ca253.f17e3c","name":"","x":316.2500228881836,"y":1672.5000534057617,"wires":[["9f47bcaf.b5cc9"]]},{"id":"ceaca0f6.ee637","type":"inject","z":"5c1ca253.f17e3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":149.2500228881836,"y":1671.5000534057617,"wires":[["d50bffb9.16587"]]},{"id":"4804186e.f31488","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":972.0000152587891,"y":1644.2500267028809,"wires":[]},{"id":"9f47bcaf.b5cc9","type":"drone-control-get-status","z":"5c1ca253.f17e3c","name":"","droneId":"","attribute":"all","x":531.2500228881836,"y":1673.5000534057617,"wires":[["90404d6.2f8e1b"]]},{"id":"90404d6.2f8e1b","type":"change","z":"5c1ca253.f17e3c","name":"","rules":[{"t":"set","p":"oldpayload","pt":"msg","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"oldpayload.global_frame","tot":"msg"},{"t":"set","p":"payload.name","pt":"msg","to":"oldpayload.id","tot":"msg"},{"t":"set","p":"payload.icon","pt":"msg","to":"plane","tot":"str"},{"t":"set","p":"payload.bearing","pt":"msg","to":"oldpayload.heading","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":754.0000152587891,"y":1672.2500267028809,"wires":[["80b80b41.f90ca8","4804186e.f31488"]]},{"id":"a3b89ba0.2132c8","type":"drone-control-get-status","z":"5c1ca253.f17e3c","name":"","droneId":"","attribute":"all","x":355.00000762939453,"y":1836.5000286102295,"wires":[["42a32010.e0978"]]},{"id":"b45a196c.bfb5e8","type":"inject","z":"5c1ca253.f17e3c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":135.00000762939453,"y":1841.5000286102295,"wires":[["a3b89ba0.2132c8"]]},{"id":"d92279bc.211f78","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":695.0000076293945,"y":1838.5000286102295,"wires":[]},{"id":"4aa92f3.a6c2cd","type":"drone-control-send-action","z":"5c1ca253.f17e3c","name":"","droneId":"","action":"Goto-Relative-Current","x":426.00000762939453,"y":1903.5000286102295,"wires":[["d92279bc.211f78"],["91b4eb1a.d64bc8"],["ebf18833.f0bcd8"]]},{"id":"42a32010.e0978","type":"change","z":"5c1ca253.f17e3c","name":"","rules":[{"t":"set","p":"payload.east","pt":"msg","to":"100","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":160.00000762939453,"y":1902.5000286102295,"wires":[["4aa92f3.a6c2cd"]]},{"id":"91b4eb1a.d64bc8","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":694.0000076293945,"y":1874.5000286102295,"wires":[]},{"id":"ebf18833.f0bcd8","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":694.0000076293945,"y":1910.5000286102295,"wires":[]},{"id":"119d9a06.b23846","type":"comment","z":"5c1ca253.f17e3c","name":"View status of all drones","info":"","x":194,"y":74,"wires":[]},{"id":"c093f55d.498d08","type":"comment","z":"5c1ca253.f17e3c","name":"Create new drone and view status","info":"","x":221,"y":225,"wires":[]},{"id":"2aea905a.70437","type":"comment","z":"5c1ca253.f17e3c","name":"Disconnect all drones","info":"","x":176,"y":386,"wires":[]},{"id":"d7d072ba.1e462","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":667,"y":858,"wires":[]},{"id":"b4981e83.9e1e6","type":"debug","z":"5c1ca253.f17e3c","name":"","active":true,"console":"false","complete":"false","x":667,"y":907,"wires":[]},{"id":"eb9aaba5.ea2228","type":"drone-control-disconnect-drone","z":"5c1ca253.f17e3c","name":"","droneId":"","x":465,"y":884,"wires":[["d7d072ba.1e462"],["b4981e83.9e1e6"]]},{"id":"bfda8e23.9877c","type":"comment","z":"5c1ca253.f17e3c","name":"Create, fly and disconnect","info":"","x":178,"y":587,"wires":[]},{"id":"dfd86ce.d45ee9","type":"comment","z":"5c1ca253.f17e3c","name":"Fly all drones in a pattern","info":"","x":225,"y":1006.25,"wires":[]},{"id":"3e65696e.c77c36","type":"comment","z":"5c1ca253.f17e3c","name":"View drones on a map","info":"","x":156.25,"y":1612.5,"wires":[]},{"id":"2b10c0c2.6706b","type":"comment","z":"5c1ca253.f17e3c","name":"Error testing","info":"","x":107.5,"y":1796.25,"wires":[]}]
```
